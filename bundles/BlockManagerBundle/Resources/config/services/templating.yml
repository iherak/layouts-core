parameters:
    netgen_block_manager.controller.block_controller: 'ngbm_block:viewBlock'

services:
    netgen_block_manager.templating.global_variable:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\GlobalVariable
        arguments:
            - "@netgen_block_manager.configuration"
            - "@netgen_block_manager.layout.resolver"
            - "@netgen_block_manager.templating.pagelayout_resolver"
            - "@netgen_block_manager.view.view_builder"
            - "@request_stack"

    netgen_block_manager.templating.twig.extension.rendering:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\Extension\RenderingExtension
        tags:
            - { name: twig.extension }

    netgen_block_manager.templating.twig.runtime.rendering.loader:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\Runtime\Loader\RenderingRuntimeLoader
        deprecated: ~
        arguments:
            - "@netgen_block_manager.api.service.block"
            - "@netgen_block_manager.view.renderer.fragment"
            - "@?logger"
        tags:
            - { name: netgen_block_manager.twig.runtime_loader }
            - { name: monolog.logger, channel: ngbm }

    netgen_block_manager.templating.twig.runtime.rendering:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\Runtime\RenderingRuntime
        arguments:
            - "@netgen_block_manager.api.service.block"
            - "@netgen_block_manager.view.renderer.fragment"
            - "@?logger"
        calls:
            - [setDebug, ["%kernel.debug%"]]
        tags:
            - { name: twig.runtime }
            - { name: monolog.logger, channel: ngbm }

    netgen_block_manager.templating.twig.extension.item:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\Extension\ItemExtension
        tags:
            - { name: twig.extension }

    netgen_block_manager.templating.twig.runtime.item.loader:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\Runtime\Loader\ItemRuntimeLoader
        deprecated: ~
        arguments:
            - "@netgen_block_manager.item.item_loader"
            - "@netgen_block_manager.item.url_builder"
            - "@?logger"
        tags:
            - { name: netgen_block_manager.twig.runtime_loader }
            - { name: monolog.logger, channel: ngbm }

    netgen_block_manager.templating.twig.runtime.item:
        class: Netgen\Bundle\BlockManagerBundle\Templating\Twig\Runtime\ItemRuntime
        arguments:
            - "@netgen_block_manager.item.item_loader"
            - "@netgen_block_manager.item.url_builder"
            - "@?logger"
        calls:
            - [setDebug, ["%kernel.debug%"]]
        tags:
            - { name: twig.runtime }
            - { name: monolog.logger, channel: ngbm }

    netgen_block_manager.templating.pagelayout_resolver.default:
        class: Netgen\Bundle\BlockManagerBundle\Templating\PageLayoutResolver
        arguments:
            - "%netgen_block_manager.pagelayout%"

    netgen_block_manager.templating.pagelayout_resolver:
        alias: netgen_block_manager.templating.pagelayout_resolver.default
